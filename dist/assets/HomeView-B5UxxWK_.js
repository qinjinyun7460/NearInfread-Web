import{A as e,C as t,D as n,E as r,M as i,O as a,P as o,S as s,T as c,_ as l,b as u,c as d,d as f,f as p,g as m,h,i as g,k as _,m as v,p as y,s as b,u as x,v as S,x as C}from"./index-oNPrC9uc.js";var w={class:`container`},T={class:`user-container`,style:{cursor:`pointer`}},E={class:`user-name`},D=v({__name:`NavbarLayout`,props:{parentUserInfo:{type:Object,default:()=>({})}},setup(a){let p=y(),m=i(!1),_=i({}),v=a;t(()=>{_.value=x()||v.userInfo;let e=e=>{let t=document.querySelector(`.user-container`);t&&!t.contains(e.target)&&(m.value=!1)};return document.addEventListener(`click`,e),()=>{document.removeEventListener(`click`,e)}});let D=async()=>{try{await b.confirm(`确定要退出登录吗？退出后需重新登录`,`退出确认`,{confirmButtonText:`确认退出`,cancelButtonText:`取消`,type:`warning`,center:!0}),f(),p.push(`/login`),d.success(`退出登录成功`);let e=_.value?.user_id;e&&await g(e,!1)}catch(e){e===`cancel`?d.info(`已取消退出`):console.error(`更新在线状态失败：`,e)}},O=async()=>{try{p.push(`/personal_center`)}catch{d.info(`退出`)}finally{m.value=!1}};return(t,i)=>{let a=n(`el-breadcrumb-item`),d=n(`el-breadcrumb`),f=n(`el-avatar`),p=n(`ArrowDown`),m=n(`el-icon`),g=n(`el-dropdown-item`),v=n(`el-dropdown-menu-divider`),y=n(`el-dropdown-menu`),b=n(`el-dropdown`),x=n(`el-header`);return c(),S(x,null,{default:e(()=>[l(`div`,w,[s(d,{separator:`/`,class:`breadcrumb`},{default:e(()=>[(c(!0),u(h,null,r(t.$route.matched,(t,n)=>(c(),S(a,{key:n,to:null},{default:e(()=>[C(o(t.meta.title),1)]),_:2},1024))),128))]),_:1}),s(b,{onCommand:t.handleDropdownCommand,trigger:`click`,placement:`bottom-end`,onVisibleChange:t.handleMenuVisible},{dropdown:e(()=>[s(y,null,{default:e(()=>[s(g,{command:`profile`,onClick:O},{default:e(()=>[...i[1]||=[l(`span`,null,`个人信息`,-1)]]),_:1}),s(v),s(g,{command:`logout`,class:`logout-btn`,onClick:D},{default:e(()=>[...i[2]||=[l(`span`,null,`退出登录`,-1)]]),_:1})]),_:1})]),default:e(()=>[l(`div`,T,[s(f,{class:`user-avatar`},{default:e(()=>[...i[0]||=[l(`img`,{src:`https://picsum.photos/id/1005/40/40`,alt:`用户头像`},null,-1)]]),_:1}),l(`span`,E,o(_.value.user_name||``),1),s(m,{class:`user-arrow`},{default:e(()=>[s(p)]),_:1})])]),_:1},8,[`onCommand`,`onVisibleChange`])])]),_:1})}}},[[`__scopeId`,`data-v-eebc5a35`]]),O=v({__name:`SidebarLayout`,setup(t){let r=y(),a=p(),o=i(``),u=e=>{r.push(e)},d=(e,t)=>{console.log(e,t)},f=(e,t)=>{console.log(e,t)};return _(()=>a.path,e=>{o.value=e},{immediate:!0}),(t,r)=>{let i=n(`el-menu-item`),a=n(`el-sub-menu`),p=n(`el-menu`),m=n(`el-row`),h=n(`el-aside`);return c(),S(h,{class:`aside`},{default:e(()=>[s(m,null,{default:e(()=>[s(p,{onOpen:d,onClose:f,onSelect:u,"default-active":o.value},{default:e(()=>[s(i,null,{default:e(()=>[...r[0]||=[l(`div`,{class:`navbar-logo`},[l(`a`,{class:`logo-text`},`System`)],-1)]]),_:1}),s(i,{index:`/`,class:`text`},{default:e(()=>[...r[1]||=[C(`首页`,-1)]]),_:1}),s(a,{index:`/user_manage`},{title:e(()=>[...r[2]||=[l(`span`,{class:`text`},`用户管理`,-1)]]),default:e(()=>[s(i,{index:`/user_manage/list`},{default:e(()=>[...r[3]||=[C(`用户列表`,-1)]]),_:1}),s(i,{index:`/user_manage/loginlogs`},{default:e(()=>[...r[4]||=[C(`登录日志`,-1)]]),_:1})]),_:1}),s(i,{index:`/samples`,class:`text`},{default:e(()=>[...r[5]||=[C(`样品数据`,-1)]]),_:1}),s(a,{index:`/settings`},{title:e(()=>[...r[6]||=[l(`span`,{class:`text`},`设置`,-1)]]),default:e(()=>[s(i,{index:`/settings/personal`},{default:e(()=>[...r[7]||=[C(`修改信息`,-1)]]),_:1}),s(i,{index:`/settings/security`},{default:e(()=>[...r[8]||=[C(`重置密码`,-1)]]),_:1}),s(i,{index:`/settings/cancel`},{default:e(()=>[...r[9]||=[C(`注销账号`,-1)]]),_:1})]),_:1})]),_:1},8,[`default-active`])]),_:1})]),_:1})}}},[[`__scopeId`,`data-v-40a03cd2`]]),k={class:`toolbar`},A=v({__name:`HomeView`,setup(o){let d=y(),f=p(),g=i(``),v=i([{path:`/`,title:`首页`}]);t(()=>{g.value=f.path,v.value.some(e=>e.path===f.path)||b(f)});let b=e=>{let t=typeof e.meta.title==`function`?e.meta.title(e):e.meta.title||`未命名页面`,n=e.fullPath;v.value.some(e=>e.key===n)||v.value.push({key:n,path:e.path,fullPath:e.fullPath,title:t}),g.value=n},x=e=>{let t=v.value.findIndex(t=>t.path===e);if(t>-1&&(v.value.splice(t,1),e===g.value)){let e=v.value[Math.max(0,t-1)];e&&(g.value=e.path,d.push(e.path))}},C=e=>{let t=e.props.name;t!==f.path&&d.push(t)};return _(()=>f.path,e=>{g.value=e,v.value.some(t=>t.path===e)||b(f)},{immediate:!0}),(t,i)=>{let o=n(`el-header`),d=n(`router-view`),f=n(`el-tab-pane`),p=n(`el-tabs`),_=n(`el-main`),y=n(`el-container`);return c(),S(y,{class:`layout-container-demo`},{default:e(()=>[s(O),s(y,null,{default:e(()=>[s(o,null,{default:e(()=>[l(`div`,k,[s(D)])]),_:1}),s(_,null,{default:e(()=>[s(p,{modelValue:g.value,"onUpdate:modelValue":i[0]||=e=>g.value=e,type:`border-card`,closable:``,onTabRemove:x,onTabClick:C},{default:e(()=>[(c(!0),u(h,null,r(v.value,t=>(c(),S(f,{key:t.path,label:t.title,name:t.path,closable:t.path!==`/`},{default:e(()=>[s(d,null,{default:e(({Component:e})=>[(c(),S(m,null,[(c(),S(a(e)))],1024))]),_:1})]),_:1},8,[`label`,`name`,`closable`]))),128))]),_:1},8,[`modelValue`])]),_:1})]),_:1})]),_:1})}}},[[`__scopeId`,`data-v-0cd49d3b`]]);export{A as default};