import{A as e,C as t,D as n,M as r,N as i,P as a,S as o,T as s,_ as c,a as l,b as u,c as d,j as f,l as p,m,x as h}from"./index-oNPrC9uc.js";var g={class:`user-list-container`},_={class:`pagination-container`},v=m({__name:`UsersLoginLog`,setup(m){let v=f({user_name:``,status:``,login_time:``,opera_info:``}),y=r([]),b=r(!1),x=f({currentPage:1,pageSize:10,total:0}),S=async()=>{try{b.value=!0;let e=sessionStorage.getItem(`current_user_id`);if(!e){d.warning(`请先登录`),b.value=!1;return}let t={current_user_id:e,user_name:v.user_name,status:v.status,login_time:v.login_time,opera_info:v.opera_info,page:x.currentPage,size:x.pageSize},n=await l.get(`/api/usersloginlogs`,{params:t});n.data.success?(y.value=n.data.data,x.total=n.data.total):d.error(n.data.message||`获取登录日志失败`)}catch(e){console.error(`登录日志查询失败：`,e),e.response&&(console.log(`请求地址：`,e.config.url),console.log(`传递的参数：`,e.config.params)),d.error(`网络错误，获取登录日志失败`)}finally{b.value=!1}},C=()=>{v.user_name=``,v.status=``,v.login_time=``,v.opera_info=``,x.currentPage=1,S()},w=e=>{x.pageSize=e,x.currentPage=1,S()},T=e=>{x.currentPage=e,S()};return t(()=>{S()}),(t,r)=>{let l=n(`el-input`),d=n(`el-form-item`),f=n(`el-option`),m=n(`el-select`),E=n(`el-button`),D=n(`el-card`),O=n(`el-table-column`),k=n(`el-tag`),A=n(`el-table`),j=n(`el-pagination`);return s(),u(`div`,g,[o(D,{shadow:`hover`,class:`filter-card`},{default:e(()=>[o(i(p),{inline:!0,model:v,class:`filter-form`},{default:e(()=>[o(d,{label:`用户名`},{default:e(()=>[o(l,{modelValue:v.user_name,"onUpdate:modelValue":r[0]||=e=>v.user_name=e,placeholder:`请输入用户名`,clearable:``,onClear:S},null,8,[`modelValue`])]),_:1}),o(d,{label:`登录时间`},{default:e(()=>[o(l,{modelValue:v.login_time,"onUpdate:modelValue":r[1]||=e=>v.login_time=e,placeholder:`请输入登录时间`,clearable:``,onClear:S},null,8,[`modelValue`])]),_:1}),o(d,{label:`登录情况`},{default:e(()=>[o(m,{modelValue:v.status,"onUpdate:modelValue":r[2]||=e=>v.status=e,placeholder:`成功或失败`,clearable:``,onClear:S,style:{width:`120px`}},{default:e(()=>[o(f,{label:`成功`,value:`true`}),o(f,{label:`失败`,value:`false`})]),_:1},8,[`modelValue`])]),_:1}),o(d,{label:`操作信息`},{default:e(()=>[o(l,{modelValue:v.opera_info,"onUpdate:modelValue":r[3]||=e=>v.opera_info=e,placeholder:`请输入操作信息`,clearable:``,onClear:S},null,8,[`modelValue`])]),_:1}),o(d,null,{default:e(()=>[o(E,{type:`primary`,onClick:S},{default:e(()=>[...r[4]||=[h(`查询`,-1)]]),_:1}),o(E,{onClick:C},{default:e(()=>[...r[5]||=[h(`重置`,-1)]]),_:1})]),_:1})]),_:1},8,[`model`])]),_:1}),o(D,{shadow:`hover`,class:`table-card`},{default:e(()=>[o(A,{data:y.value,border:``,stripe:``,loading:b.value,style:{width:`100%`},"max-height":`800`},{default:e(()=>[o(O,{label:`用户ID`,prop:`user_id`,align:`center`,width:`120`,sortable:``}),o(O,{label:`用户名`,prop:`user_name`,align:`center`}),o(O,{label:`登录方式`,prop:`login_type`,align:`center`}),o(O,{label:`登录IP`,prop:`ip_address`,align:`center`}),o(O,{label:`用户设备信息`,prop:`user_agent`,align:`center`,"show-overflow-tooltip":``}),o(O,{label:`登录情况`,prop:`status`,align:`center`},{default:e(t=>[o(k,{type:t.row.status?`success`:`danger`},{default:e(()=>[h(a(t.row.status?`成功`:`失败`),1)]),_:2},1032,[`type`])]),_:1}),o(O,{label:`登录时间`,prop:`login_time`,align:`center`,sortable:``}),o(O,{label:`操作信息`,prop:`opera_info`,align:`center`})]),_:1},8,[`data`,`loading`]),c(`div`,_,[o(j,{onSizeChange:w,onCurrentChange:T,"current-page":x.currentPage,"page-sizes":[10,20,50,100],"page-size":x.pageSize,layout:`total, sizes, prev, pager, next, jumper`,total:x.total},null,8,[`current-page`,`page-size`,`total`])])]),_:1})])}}},[[`__scopeId`,`data-v-98a3d126`]]);export{v as default};